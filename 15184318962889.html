<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>  
	  
  	现代CSS 实现照片画廊布局 - Akira's blog
  	
	</title

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="atom.xml" rel="alternate" title="Akira's blog" type="application/atom+xml">

	<link href="asset/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="asset/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<script src="asset/javascripts/jquery.min.js"></script>
	<script src="asset/highlightjs/highlight.pack.js"></script>
	<link href="asset/highlightjs/styles/solarized_dark.css" media="screen, projection" rel="stylesheet" type="text/css">
<script>hljs.initHighlightingOnLoad();</script>
	<!--[if lt IE 9]><script src="asset/javascripts/html5.js"></script><![endif]-->
	<!-- <link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'> -->
	<style type="text/css">
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 300;
  src: local('Nunito-Light'), url(asset/font/1TiHc9yag0wq3lDO9cw0voX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 400;
  src: local('Nunito-Regular'), url(asset/font/6TbRXKWJjpj6V2v_WyRbMX-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 700;
  src: local('Nunito-Bold'), url(asset/font/TttUCfJ272GBgSKaOaD7KoX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
	</style>
	
	<style type="text/css">
	.container .left-col{ opacity: 1;}
	#pagenavi a{ font-size: 1.3em;}
	#pagenavi .next:before{ top: 3px;}
	#pagenavi .prev:before{ top: 3px;}
	.container .mid-col .mid-col-container #content .archives .title{ font-size: 1.5em;}
	.container .mid-col .mid-col-container #content article{ padding: 15px 0px;}
	#header .subtitle {
		line-height: 1.2em;
		padding-top: 8px;
	}
	#sub-nav .social a.weibo {
		background: url('asset/images/social/weibo.png?1419407210') center no-repeat #4ec4fa;
		border: 1px solid #4ec4fa;
	}
	article pre{ background: none; border: none; padding: 0;}
	article .entry-content{text-align: left;}
	article .entry-content table th,article .entry-content table td{ padding: 4px;border-collapse: collapse; border:solid 1px #ddd;}
	</style>
	
</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner">
					<div class="profilepic">
						<img src="asset/icon.jpg" style="width:160px;">
					</div>
					<h1><a href="index.html">Akira's blog</a></h1>
					<p class="subtitle">记录一些技术文章</p>
					<nav id="main-nav">
						<ul class="main">
							<li><a href="index.html">Home</a></li>
						    <li><a href="all.html">Blog</a></li>
						    <li><a href="archives.html">Archives</a></li>
						</ul>
					</nav>

					<nav id="sub-nav">
						<div class="social">

<!-- 
			<a class="email" href="mailto:" title="Email">Email</a>
			<a class="facebook" href="http://www.facebook.com/" title="Facebook">Facebook</a>
			<a class="google" href="https://plus.google.com/" rel="author" title="Google+">Google+</a>
			<a class="twitter" href="http://twitter.com/" title="Twitter">Twitter</a>
			<a class="github" href="https://github.com/" title="GitHub">GitHub</a>
			<a class="coderwall" href="https://coderwall.com/" title="Coderwall">Coderwall</a>
		    <a class="stackoverflow" href="http://stackoverflow.com/users/" title="StackOverflow"></a>
			<a class="linkedin" href="http://www.linkedin.com/in/" title="LinkedIn">LinkedIn</a>
			<a class="pinterest" href="https://pinterest.com/" title="Pinterest">Pinterest</a>
			<a class="delicious" href="http://delicious.com/" title="Delicious">Delicious</a>
			<a class="pinboard" href="https://pinboard.in/u:" title="Pinboard">Pinboard</a>
			<a class="douban" href="https://www.douban.com/people/" title="Douban">Douban</a>
			<a class="quora" href="https://quora.com/" title="Quora">Quora</a>
			<a class="instagram" href="https://instagram.com/" title="Instagram">Instagram</a>
			<a class="behance" href="https://www.behance.net/" title="Behance">Behance</a>
			<a class="facebook" href="http://www.facebook.com/" title="Facebook">Facebook</a>
-->	
								<a class="email" href="mailto:huixiao1008@gmail.com" title="Email">Email</a>
								<a class="weibo" target="_blank" href="https://weibo.com/u/2554601764" title="weibo">Weibo</a>
								
								<a class="github" target="_blank" href="https://github.com/Bug-Lollipop" title="GitHub">GitHub</a>
								<!-- <a class="twitter" target="_blank" href="http://twitter.com/oulvhai" title="Twitter">Twitter</a> -->
								<!-- <a class="rss" href="atom.xml" title="RSS">RSS</a> -->
							
						</div>
					</nav>
				</header>				
			</div>
		</div>	
		<div class="mid-col">

			<div class="mid-col-container">
		

			
 <div id="content" class="inner">

	<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
		<h1 class="title" itemprop="name">现代CSS 实现照片画廊布局</h1>
		<div class="entry-content" itemprop="articleBody">
			<p>我们经常会遇到不同布局的照片墙展示图片，下面来使用纯CSS 实现照片墙。</p>

<h3 id="toc_0">响应式布局Responsive Layout</h3>

<p>首先我们设想画廊在大屏上面的显示效果是这样的：</p>

<span id="more"></span><!-- more -->

<p><img src="http://upload-images.jianshu.io/upload_images/1673685-61a4e01216bc8ded.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="大屏显示效果"/></p>

<p>在较小的屏幕上(例如&lt; 50 em),应该有以下效果:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1673685-bae12be119b0b242.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="较小屏幕显示效果"/><br/>
这个标签简单写成</p>

<pre><code class="language-html">&lt;div&gt;
   &lt;a href=&quot;path-to-the-image&quot;&gt; 
    &lt;figure&gt; 
      &lt;img src=&quot;path-to-the-image&quot; alt=&quot;&quot;&gt; 
    &lt;/figure&gt; 
  &lt;/a&gt;
 &lt;!-- other anchors here ... --&gt;&lt;/div&gt;
</code></pre>

<p>正如你可能已经知道的,我们可以利用不同的布局方法来产生期望的结果。此前我测试了两种不同的方法，让我们记下我们的初始需求(见上面的图片):</p>

<ul>
<li>我想要在中等屏幕上和较小屏幕（例如&lt;50em）上实现两列布局，在大屏幕（例如：50em 及以上）上实现4列布局</li>
<li>相邻列之间的距离一直为8px</li>
</ul>

<h4 id="toc_1">用 inline-block</h4>

<p>用<code>display: inline-block</code> 方法去构建照片墙。参照下面的CSS：</p>

<pre><code class="language-css">div {
  font-size: 0;
}
a {
    font-size: 16px; 
    display: inline-block;
    margin-bottom: 8px;
    width: calc(50% - 4px);
    margin-right: 8px;
}
a:nth-of-type(2n) {
    margin-right: 0;
}
@media screen and (min-width: 50em) {
    a {
      width: calc(25% - 6px);
    }
    a:nth-of-type(2n) {
      margin-right: 8px;
    }
    a:nth-of-type(4n) {
      margin-right: 0;
    }
}
</code></pre>

<p>解释一下上面的代码：<br/>
默认情况下,<code>inline-block</code>元素之间有一个空格。一个解决这个问题的方法是父元素的字体大小设置为0。这意味着我们要重置所有子元素的字体大小(在我们的例子中没有必要)。<br/>
在小屏幕上，我们的2列布局相邻列的间距为8px。</p>

<p>这个列的宽度计算如下：<br/>
- 每一行列与列之间的空隙总和 =<code>1 * 8 px = &gt; 8 px</code>。得到的值为8px,而不是16 px,因为我删除了每行第二列在小屏幕上的右边距。<br/>
- 每一列的宽度=<code>calc(50% - 4 px)</code>。这个4 px通过该计算可得:每一行总共的列间隙/每一行列数(<code>8 px / 2 = &gt; 4 px</code>)。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1673685-0c44762a515a63f4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="两列图片宽度示意"/></p>

<p>在大屏幕中设计4列布局，依然保持列间距为8px，因此，列宽的计算如下：</p>

<ul>
<li>每一行列与列之间的空隙总和 = <code>3 * 8 px = &gt; 24 px</code>。得到的值为24px,而不是32 px,因为我删除了每行第四列在小屏幕上的右边距。</li>
<li>每一列的宽度= <code>calc(25% - 6 px)</code>。这个6 px通过该计算可得:每一行总共的列间隙/每一行列数(<code>24 px / 4= &gt; 6 px</code>)。</li>
</ul>

<p><img src="http://upload-images.jianshu.io/upload_images/1673685-6cfdabdcea06841e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="四列图片宽度示意"/><br/>
<a href="https://codepen.io/huixiao/pen/ObJmRY">codepen for display: inline-block method</a></p>

<h3 id="toc_2">用Flexbox</h3>

<p>上面的解决方案工作很好,但也有一些缺点。为了演示这个缺点,我们假设每个图像都包含一个标题。<br/>
更新后的代码如下：</p>

<pre><code>&lt;div&gt;
    &lt;a href=&quot;path-to-the-image&quot;&gt;
      &lt;figure&gt;
        &lt;img src=&quot;path-to-the-image&quot; alt=&quot;&quot;&gt;
      &lt;figcaption&gt;Some text here&lt;/figcaption&gt;
      &lt;/figure&gt;
    &lt;/a&gt;
    &lt;!-- other anchors here ... --&gt;
&lt;/div&gt;
</code></pre>

<p>更新后的布局在大屏展示效果如下：</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1673685-4ecf3914d47bb7f9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="带有标题的图片展示"/></p>

<p>显而易见，结果不尽人意,因为栅格项目有不同的高度。我们用CSS3中的flexbox可以修复这个问题,它是一种现代CSS设计方法,它将使我们能够解决许多常见的布局问题(如默认<code>inline-block</code>元素)之间的差距。为了展示这个方法,我只需要更新父元素的CSS(flex容器):</p>

<pre><code>div {
  display: flex;
  flex-wrap: wrap;
}

</code></pre>

<p>非常完美！如果我们现在预览画廊,我们会得到预期的结果(即所有列高相等)在所有屏幕。下面是大屏幕上看起来:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1673685-5c733f359b654d30.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Flexbox 布局画廊"/><br/>
<a href="http://codepen.io/huixiao/pen/oYNWqa"> CodePen demo using flexbox with improved captions</a></p>

<p>最后我需要解释一点：Flexbox提供justify-content属性用于沿着flex容器的当前行的主轴对齐flex项目。但是，请注意，此属性不能定义我们要构建所需画廊布局的值。例如,｀space-between｀值在这个布局中:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1673685-e8ad1437d3bd414a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="space-between"/></p>

<p>当<code>justify-content</code>值为 <code>space-around</code> 结果将为：</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1673685-627a1109d13fe3b0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="space-around"/><br/>
在上面上个例子中，最后两个项目将会很尴尬的两端分散展示。CSS 样式是这样的：</p>

<pre><code class="language-css">div {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between; /* or space-around */
} 

a {
  display: inline-block;
  margin-bottom: 8px;
  width: calc(50% - 4px);
}

@media screen and (min-width: 50em) {
  a {
    width: calc(25% - 6px);
  }
}
</code></pre>

<p>在这种情况下，我没有为flex项目分配<code>margin-right</code>属性。这是因为，根据<code>justify-content</code>属性的值，浏览器负责在其容器中自适应分配flex项目。<br/>
<a href="http://codepen.io/huixiao/pen/ENxmLQ">CodePen demo using the justify-content property</a></p>

<blockquote>
<p><a href="https://www.sitepoint.com/using-modern-css-to-build-a-responsive-image-grid/">https://www.sitepoint.com/using-modern-css-to-build-a-responsive-image-grid/</a><br/>
<a href="http://gridbyexample.com/">http://gridbyexample.com/</a></p>
</blockquote>

		</div>
	</article>
<div class="share-comment">

</div>


</div>        </div>
	
	</div>
<script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

</body>
</html>