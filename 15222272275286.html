<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>  
	  
  	【译】display: content 是如何工作的 - Akira's blog
  	
	</title

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="atom.xml" rel="alternate" title="Akira's blog" type="application/atom+xml">

	<link href="asset/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="asset/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<script src="asset/javascripts/jquery.min.js"></script>
	<script src="asset/highlightjs/highlight.pack.js"></script>
	<link href="asset/highlightjs/styles/solarized_dark.css" media="screen, projection" rel="stylesheet" type="text/css">
<script>hljs.initHighlightingOnLoad();</script>
	<!--[if lt IE 9]><script src="asset/javascripts/html5.js"></script><![endif]-->
	<!-- <link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'> -->
	<style type="text/css">
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 300;
  src: local('Nunito-Light'), url(asset/font/1TiHc9yag0wq3lDO9cw0voX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 400;
  src: local('Nunito-Regular'), url(asset/font/6TbRXKWJjpj6V2v_WyRbMX-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
/* latin */
@font-face {
  font-family: 'Nunito';
  font-style: normal;
  font-weight: 700;
  src: local('Nunito-Bold'), url(asset/font/TttUCfJ272GBgSKaOaD7KoX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
	</style>
	
	<style type="text/css">
	.container .left-col{ opacity: 1;}
	#pagenavi a{ font-size: 1.3em;}
	#pagenavi .next:before{ top: 3px;}
	#pagenavi .prev:before{ top: 3px;}
	.container .mid-col .mid-col-container #content .archives .title{ font-size: 1.5em;}
	.container .mid-col .mid-col-container #content article{ padding: 15px 0px;}
	#header .subtitle {
		line-height: 1.2em;
		padding-top: 8px;
	}
	#sub-nav .social a.weibo {
		background: url('asset/images/social/weibo.png?1419407210') center no-repeat #4ec4fa;
		border: 1px solid #4ec4fa;
	}
	article pre{ background: none; border: none; padding: 0;}
	article .entry-content{text-align: left;}
	article .entry-content table th,article .entry-content table td{ padding: 4px;border-collapse: collapse; border:solid 1px #ddd;}
	</style>
	
</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner">
					<div class="profilepic">
						<img src="asset/icon.jpg" style="width:160px;">
					</div>
					<h1><a href="index.html">Akira's blog</a></h1>
					<p class="subtitle">记录一些技术文章</p>
					<nav id="main-nav">
						<ul class="main">
							<li><a href="index.html">Home</a></li>
						    <li><a href="all.html">Blog</a></li>
						    <li><a href="archives.html">Archives</a></li>
						</ul>
					</nav>

					<nav id="sub-nav">
						<div class="social">

<!-- 
			<a class="email" href="mailto:" title="Email">Email</a>
			<a class="facebook" href="http://www.facebook.com/" title="Facebook">Facebook</a>
			<a class="google" href="https://plus.google.com/" rel="author" title="Google+">Google+</a>
			<a class="twitter" href="http://twitter.com/" title="Twitter">Twitter</a>
			<a class="github" href="https://github.com/" title="GitHub">GitHub</a>
			<a class="coderwall" href="https://coderwall.com/" title="Coderwall">Coderwall</a>
		    <a class="stackoverflow" href="http://stackoverflow.com/users/" title="StackOverflow"></a>
			<a class="linkedin" href="http://www.linkedin.com/in/" title="LinkedIn">LinkedIn</a>
			<a class="pinterest" href="https://pinterest.com/" title="Pinterest">Pinterest</a>
			<a class="delicious" href="http://delicious.com/" title="Delicious">Delicious</a>
			<a class="pinboard" href="https://pinboard.in/u:" title="Pinboard">Pinboard</a>
			<a class="douban" href="https://www.douban.com/people/" title="Douban">Douban</a>
			<a class="quora" href="https://quora.com/" title="Quora">Quora</a>
			<a class="instagram" href="https://instagram.com/" title="Instagram">Instagram</a>
			<a class="behance" href="https://www.behance.net/" title="Behance">Behance</a>
			<a class="facebook" href="http://www.facebook.com/" title="Facebook">Facebook</a>
-->	
								<a class="email" href="mailto:huixiao1008@gmail.com" title="Email">Email</a>
								<a class="weibo" target="_blank" href="https://weibo.com/u/2554601764" title="weibo">Weibo</a>
								
								<a class="github" target="_blank" href="https://github.com/Bug-Lollipop" title="GitHub">GitHub</a>
								<!-- <a class="twitter" target="_blank" href="http://twitter.com/oulvhai" title="Twitter">Twitter</a> -->
								<!-- <a class="rss" href="atom.xml" title="RSS">RSS</a> -->
							
						</div>
					</nav>
				</header>				
			</div>
		</div>	
		<div class="mid-col">

			<div class="mid-col-container">
		

			
 <div id="content" class="inner">

	<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
		<h1 class="title" itemprop="name">【译】display: content 是如何工作的</h1>
		<div class="entry-content" itemprop="articleBody">
			<p>原文： <a href="https://bitsofco.de/how-display-contents-works/">https://bitsofco.de/how-display-contents-works/</a></p>

<p>就像经常提到的那样，每个元素在文档流中都是一个长方形的盒子，简单解释是：这个“长方形的盒子” 由两部分组成。第一部分是一个真实的盒子，由border， padding 和 margin 的区域组成。接下来一部分是盒子的内容区域。</p>

<p><img src="media/15222272275286/15222278110836.png" alt=""/></p>

<p>CSS <code>display</code> 属性可以让我们去控制如何在这个盒子中及它的子元素在页面上的排列，我们可以用<code>inline</code> 属性使这个盒子和兄弟元素在同一行，也可以用 <code>table</code> 属性使其呈现表格的状态，我们甚至可以用 <code>absolute</code> 属性，在不同事物 Z 轴上堆叠这个盒子。<br/>
<code>display</code> 属性有两个可能值可以控制并标记指定的元素生成方框。<code>none</code> 值 会使盒子和内容都不在页面中绘制。另一方面，<code>content</code> 值是一个新的特性，盒子中的文本将会被正常绘制，而围绕在盒子中的框并不会生成。</p>

<span id="more"></span><!-- more -->

<h3 id="toc_0">当你用了display: content 会发生什么？</h3>

<p>简单理解就是： 用<code>display: content</code> 的时候，想象这个元素标记的开始和结束标签都消失。</p>

<p><a href="https://www.w3.org/TR/css-display-3/#box-generation">w3c 规范</a>中说道：</p>

<blockquote>
<p>For the purposes of box generation and layout, the element must be treated as if it had been replaced in the element tree by its contents </p>
</blockquote>

<p>举个例子，如下：</p>

<pre><code>&lt;div class=&quot;outer&quot;&gt;
  I’m some content
  &lt;div class=&quot;inner&quot;&gt;I’m some inner content&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>对应的CSS样式为：</p>

<pre><code>.outer {
  border: 2px solid lightcoral;
  background-color: lightpink;
  padding: 20px;
}

.inner {
  background-color: #ffdb3a;
  padding: 20px;
}
</code></pre>

<p>通常情况，我们以为元素在页面中的绘制是这样的：<br/>
<img src="media/15222272275286/15222345246824.png" alt=""/></p>

<p>然而，如果我们在 <code>.outer</code> 元素上 加上了 <code>display: content</code>，它的展示效果为：<br/>
<img src="media/15222272275286/15222359171375.png" alt=""/><br/>
从视觉效果上来说，上面的结果和我们预期的去掉外围元素的开始和结束标签<br/>
显示的效果一样。</p>

<pre><code>I’m some content
&lt;div class=&quot;inner&quot;&gt;I’m some inner content&lt;/div&gt;
</code></pre>

<h3 id="toc_1">举几个例子</h3>

<p>这个CSS规则虽然看似简单，但有很多边缘case和特定行为需要注意。我们需要记住，<code>display：contents</code> 规则仅影响在页面上可视化绘制的盒子，它不会影响文档流中的标签。</p>

<h4 id="toc_2">在元素的属性中的应用</h4>

<p>如果这个元素通过其内容被有效替换，那么对应用于它的一些属性的意义是什么？由于这个替换大部分是可视化的，我们使用它的属性进行 选择，定位和与其元素进行交互。</p>

<p>我们可以始终通过ID 定位这个元素，例如，用 <code>aria-labelledby</code> 做引用：</p>

<pre><code>&lt;div id=&quot;label&quot; style=&quot;display: contents;&quot;&gt;Label here!&lt;/div&gt;
&lt;button aria-labelledby=&quot;label&quot;&gt;&lt;button&gt;
</code></pre>

<p>但是，发现还有一种情况无法正常工作，那就是不能用片段标识符（fragment identifier）去导航到这个元素。</p>

<pre><code>&lt;div id=&quot;target&quot; style=&quot;display: contents;&quot;&gt;Target Content&lt;/div&gt;

&lt;script&gt;
  window.location.hash = &quot;target&quot;;
  // =&gt; Nothing happens
&lt;/script&gt;
</code></pre>

<h4 id="toc_3">在Javascript 事件中的应用</h4>

<p>正如我们刚刚介绍的，我们还是对其使用 <code>display: content</code> 。事实上，我们也可以用 <code>display: none</code> ，当使用 <code>display: none</code> 时我们无法与元素进行交互，因此该事件不能被触发。但是，由于具有 <code>display: centent</code> 的元素的内容是一直可见的，我们可以通过元素的内容与其元素进行交互。</p>

<pre><code>&lt;div class=&quot;outer&quot;&gt;I’m some content&lt;/div&gt;

&lt;script&gt;
  document.querySelector(&quot;.outer&quot;).addEventListener(&quot;click&quot;, function(event) {
    console.log(this);
    // =&gt; &lt;div class=&quot;outer&quot;&gt;&lt;/div&gt;
  });
&lt;/script&gt;
</code></pre>

<h4 id="toc_4">在伪元素中的应用</h4>

<p>有 <code>display: content</code> 的元素的伪元素，被认为是其子元素的一部分，因此展示是正常的。</p>

<pre><code>&lt;style&gt;
  .outer { display: contents; }
  .outer::before { content: &quot;Before&quot; }
  .outer::after { content: &quot;After&quot; }
&lt;/style&gt;

&lt;div class=&quot;outer&quot;&gt;I’m some content&lt;/div&gt;
</code></pre>

<p>上面的代码运行效果为：<br/>
<img src="media/15222272275286/15222414393061.png" alt=""/></p>

<h4 id="toc_5">在表单元素，图像和可替换元素中的应用</h4>

<p>当<code>display: content</code> 被应用时，<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Replaced_element">可替换元素</a>与一些表单具有不同的行为。</p>

<h5 id="toc_6">可替换元素</h5>

<p>可替换元素也是元素，例如图像，其外观和“框”由外部资源控制。 试图删除这样元素的元素框并没有什么意义，因为它不完全清楚“盒子”是什么。 对于这些元素，<code>display: content</code> 的功能与<code>display: none</code>完全相同。元素的整个框和内容都没有绘制在页面上。</p>

<p><strong><em>译者注</em></strong>： CSS 里，可替换元素（replaced element）的展现不是由CSS来控制的。这些元素是一类 外观渲染独立于CSS的外部对象。 典型的可替换元素有 <code>&lt;img&gt;</code>、 <code>&lt;object&gt;</code>、 <code>&lt;video&gt;</code>和 表单元素，如<code>&lt;textarea&gt;</code>、 <code>&lt;input&gt;</code> 。 某些元素只在一些特殊情况下表现为可替换元素，例如 <code>&lt;audio&gt;</code>和<code>&lt;canvas&gt;</code>。</p>

<h5 id="toc_7">表单元素</h5>

<p>对于很多表单元素来说，它们并不是有一个“盒子“构成。但是从网页开发者的角度上，它们就是像一个盒子一样，但是事实上，它们是由几个较小的原件组件，与被替换的元素类似，由于这个框是不存在的，所以删除这个盒子是没有意义的。因此对于 <code>&lt;select&gt;</code>，<code>&lt;input&gt;</code>  <code>&lt;textarea&gt;</code> 这些表单元素，<code>display: centent</code> 的功能与<code>display: none</code> 是相同的。<br/>
<a href="https://www.w3.org/TR/css-display-3/#unbox-html">（参阅 display:centent 工作原理的完整列表）</a></p>

<h4 id="toc_8">按钮和链接呢</h4>

<p>当设置成 <code>display:centent</code> 时， <code>&lt;button&gt;</code> 和<code>&lt;a&gt;</code>元素都没有任何特殊的行为。不过，了解这条规则对它们的影响还是有用的，因为它的作用不是很显而易见。</p>

<h5 id="toc_9">按钮</h5>

<p>按钮是无其它的”框“组成的的表单元素之一。因此 <code>display:content</code> 只会删除周围的框，而只展示显示的按钮的内容。如果在表单中使用，点击按钮仍会尝试提交表单，正如我们介绍的那样，按钮上的任何事件监听器都将正常工作。</p>

<h5 id="toc_10">链接</h5>

<p>对于链接，相同点也是视觉上删除周围的框，将链接的内容留下来。由于属性并不受此CSS规则的影响，因此该链接仍然可以正常运行，并且用于正常导航。</p>

<h3 id="toc_11">为什么display: centent 会有用</h3>

<p>在此之前，我们不得不用一种更符合语义的方式来布局我们的HTML —— 使用CSS去进行样式设计。这导致我们要么包裹太多没必要的元素，要么用很少的元素去直接使用兄弟样式。后者与引入 CSS Grid Layout 很有关系，至少目前它需要使用直接的兄弟元素去实现。<br/>
举个例子， 我们看一下这个布局：<br/>
<img src="media/15222272275286/15224744692530.png" alt=""/></p>

<p>我们有两张彼此相邻的卡片，它们都有一个标题头部，一个段落和一个页脚。如果我们想要这两个相邻的卡片的每个部分都是相同的高度，而不管每个部分的内容如何（例如：第一张卡片只有一行标题，而第三张卡片有三行标题，但是第一张卡片的标题部分的高度应该与第三张卡片的高度一致）</p>

<p>我们可以使用 CSS Grid 完成这个布局，因此我们需要将卡内所有的元素都变为兄弟元素，因此我们可能需要这样布局我们的HTML：</p>

<pre><code>&lt;div class=&quot;grid&quot;&gt;
  &lt;h2&gt;This is a heading&lt;/h2&gt;
  &lt;p&gt;...&lt;/p&gt;
  &lt;p&gt;Footer stuff&lt;/p&gt;
    
  &lt;h2&gt;This is a really really really super duper loooong heading&lt;/h2&gt;
  &lt;p&gt;...&lt;/p&gt;
  &lt;p&gt;Footer stuff&lt;/p&gt;
&lt;/div&gt;
</code></pre>

<p>对应的CSS 为：</p>

<pre><code>.grid {
  display: grid;
  grid-auto-flow: column;
  grid-template-rows: auto 1fr auto;
  grid-template-columns: repeat(2, 1fr);
  grid-column-gap: 20px;
}

</code></pre>

<p>虽然对于构建文档来说，这并没有什么不正确的地方，但将  <code>&lt;article&gt;</code> 元素中的卡片分组显得更有意义。这里用到 <code>display: content</code>，我们能够同时使用个两全其美的方案 - 通过在更语义化的方式来布局这些标签，让CSS的布局更合理。</p>

<pre><code>&lt;div class=&quot;grid&quot;&gt;
  &lt;article style=&quot;display: contents;&quot;&gt;
    &lt;h2&gt;This is a heading&lt;/h2&gt;
    &lt;p&gt;...&lt;/p&gt;
    &lt;p&gt;Footer stuff&lt;/p&gt;
  &lt;/article&gt;
  &lt;article style=&quot;display: contents;&quot;&gt;
    &lt;h2&gt;This is a really really really super duper loooong heading&lt;/h2&gt;
    &lt;p&gt;...&lt;/p&gt;
    &lt;p&gt;Footer stuff&lt;/p&gt;
  &lt;/article&gt;
&lt;/div&gt;
</code></pre>

<p>和上面相同的CSS， 我们可以实现当前想要的布局。</p>

<h3 id="toc_12">display: content 的支持程度</h3>

<p>在撰写本文时，<code>display: content</code> 仅在两个主流浏览器中得到支持，其他支持很快就会到来。<br/>
<img src="media/15222272275286/15225667290861.jpg" alt=""/></p>

<p>因此，此功能目前仍应被视为渐进式增强功能，并应使用适当的降级方案。</p>

<pre><code>article {
  display: grid;
  grid-template-rows: 200px 1fr auto; /* e.g. Use a fixed height for the header */
}

@supports (display: contents) {
  article { display: contents; }
}
</code></pre>

		</div>
	</article>
<div class="share-comment">

</div>


</div>        </div>
	
	</div>
<script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

</body>
</html>